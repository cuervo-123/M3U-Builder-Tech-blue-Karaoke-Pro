<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tech Blue â€¢ M3U Builder + Karaoke Pro</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="tb-header">
    <h1>Tech Blue â€¢ M3U Builder ğŸ›ï¸ + Karaoke ğŸ¤</h1>
    <nav class="tb-actions">
      <button id="btnTabBuilder" class="active">M3U Builder</button>
      <button id="btnTabKaraoke">Karaoke</button>
    </nav>
  </header>

  <main>
    <!-- ======== M3U BUILDER ======== -->
    <section id="tabBuilder" class="tab active">
      <div class="card">
        <h2>ğŸ“º Cargar listas</h2>
        <div class="row wrap">
          <input type="file" id="fileInput" accept=".m3u,.m3u8,.json" />
          <button id="exportAll">ğŸ“¤ Exportar todo (.json)</button>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>ğŸ¯ Filtros</h3>
          <div class="row wrap">
            <label class="label">CategorÃ­a</label>
            <select id="filtroCategoria"></select>
            <input type="text" id="buscador" placeholder="ğŸ” Buscar canal..." />
          </div>

          <h3>ğŸ“œ Canales</h3>
          <select id="canalDropdown" size="12" class="fill"></select>

          <div class="row wrap mt8">
            <button id="btnVerificar">â–¶ï¸ Verificar canal</button>
            <span class="hint">Atajos: â†‘/â†“ navegar, Enter verificar</span>
          </div>

          <div id="player" class="player"></div>
        </div>

        <div class="card">
          <h3>ğŸ“ Listas personalizadas</h3>
          <div class="row wrap">
            <input type="text" id="nombreLista" placeholder="Nombre de la lista" />
            <button id="btnCrearLista">Crear</button>
          </div>

          <div class="row wrap">
            <label class="label">Agregar canal actual a:</label>
            <select id="playerListSelect"></select>
            <button id="btnAgregarALista">â• Agregar</button>
          </div>

          <div class="row wrap">
            <label class="label">CategorÃ­a del canal:</label>
            <select id="categoriaPlayerSelect"></select>
            <button id="btnGuardarCategoria">Guardar categorÃ­a</button>
          </div>

          <div class="row wrap mt8">
            <button id="btnExpandirTodo">Expandir todo</button>
            <button id="btnColapsarTodo">Colapsar todo</button>
          </div>

          <div id="listas"></div>
        </div>
      </div>
    </section>

    <!-- ======== KARAOKE ======== -->
    <section id="tabKaraoke" class="tab">
      <div class="card">
        <div class="karaoke-header">
          <h2>ğŸ¤ Karaoke Manager</h2>
          <div class="row wrap">
            <span class="label">Color Neon</span>
            <div id="colorPicker" class="colorPicker"></div>
          </div>
        </div>
        <p class="hint">Busca canciones, aÃ±Ã¡delas a participantes y arma una cola de turnos. El escenario Tech Blue se ilumina en modo Neon solo cuando hay mÃºsica reproduciÃ©ndose.</p>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>ğŸ” Buscar en YouTube</h3>
          <div class="row wrap">
            <input type="text" id="ytQuery" placeholder="Artista - Tema (solo audio de YouTube)" />
            <button id="buscarYT">Buscar</button>
          </div>
          <div id="ytResults" class="ytResults"></div>
        </div>

        <div class="card">
          <h3>ğŸ‘¥ Participantes</h3>
          <div class="row wrap">
            <input type="text" id="nuevoParticipante" placeholder="Nombre del participante" />
            <button id="btnAgregarParticipante">â• Agregar</button>
            <button id="btnExportSesionJSON">ğŸ“¤ Exportar sesiÃ³n (JSON)</button>
            <button id="btnExportSesionM3U">ğŸ“¤ Exportar sesiÃ³n (M3U)</button>
          </div>
          <div id="participantes"></div>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <h3>â–¶ï¸ Reproductor</h3>
          <div id="ytPlayer" class="ytPlayer"></div>
          <div class="row wrap mt8">
            <button id="btnPlay">Play</button>
            <button id="btnPause">Pause</button>
            <button id="btnNext">â­ï¸ Siguiente en cola</button>
          </div>
        </div>
        <div class="card">
          <h3>ğŸ” Cola de turnos</h3>
          <div class="row wrap">
            <button id="btnGenerarCola">ğŸ”„ Generar (round-robin)</button>
            <button id="btnPrev">â®ï¸ Anterior</button>
            <button id="btnNext2">â­ï¸ Siguiente</button>
            <span class="pill" id="turnosLen">0 en cola</span>
          </div>
          <div class="mt8">
            <div id="nowPlaying" class="strong">Ahora canta: â€”</div>
            <div id="nextUp" class="hint">Siguiente: â€”</div>
          </div>
        </div>
      </div>

      <canvas id="visualizer" class="visualizer"></canvas>
      <div id="neonLabel" class="neonLabel">ğŸ¶ Neon Stage Active</div>
    </section>
  </main>

  <footer class="tb-footer">Tech Blue â€¢ Cuervoâ€‘Inc</footer>

  <!-- Libs -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://www.youtube.com/iframe_api"></script>
  <script src="script.js"></script>
</body>
</html>
